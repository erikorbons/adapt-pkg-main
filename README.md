

## API

```javascript
// Synchronously does the work, throws error if there is an error.
require('adapt-pkg-main')(dir, options);
```

**dir** is the directory to scan. This is likely the directory your package manager has installed dependencies. It should contain a list of directories in it which are the packages of JS code that have been installed by a package manager.

Relative directories are relative to whatever the current working directory is when this module is called.

Only one level of directory scanning is done by this module. It does not try to recursively scan for other directories containing module packages, like nested `node_modules`. For those nested cases, do the subdirectory scan outside of this module, and call this module with each directory.

So if the directory structure is like this:

* my_packages
  * alpha
  * beta

Then pass `my_packages` as the dir value, and alpha and beta will be scanned for "main" package config, and a `my_packages/alpha.js` and `my_packages/beta.js` will be generated by this module.

The **options** object is optional, and can have the following properties:

**configFileNames**: An array of JSON-formated file names to check for a "main" property in each package. The default is `['package.json', 'bower.json']`. The order of the entries is the order this module uses to find a "main" entry.

**adapterText**: A string that is used for the module body of the adapter. Default is `define(['./{id}'], function(m) { return m; });`. The `{id}` part is replaced by this module with the name of the package's main module ID.

If wanting to write out the adapters in Node's module format, you can pass the string `module.exports = require('./{id}');`
